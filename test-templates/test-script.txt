# 2022-9-11
# test songs are all approximately 30 seconds long

section Basic

test Init
msg main QUEUE_PLAY_ON_ADD 0
msg main QUEUE_SWITCH_EMPTY 0
msg main MUSICQ_SET_MANAGE 0
msg main MUSICQ_SET_PLAYBACK 0
reset

test Insert-Play
chk main CHK_MAIN_MUSICQ plen 0
msg main MUSICQ_INSERT 0~99~0
chk main CHK_MAIN_MUSICQ plen 1
msg main CMD_PLAY
mssleep 500
chk player CHK_PLAYER_STATUS playstate playing
mssleep 2000
chk player CHK_PLAYER_STATUS playstate playing
resptimeout 35000
wait player CHK_PLAYER_STATUS playstate stopped
chk main CHK_MAIN_MUSICQ plen 0
end

test Insert-Play-2
chk main CHK_MAIN_MUSICQ plen 0
msg main MUSICQ_INSERT 0~99~1
chk main CHK_MAIN_MUSICQ plen 1
msg main CMD_PLAY
mssleep 500
chk player CHK_PLAYER_STATUS playstate playing
mssleep 2000
msg main MUSICQ_INSERT 0~99~2
chk main CHK_MAIN_MUSICQ plen 2
chk player CHK_PLAYER_STATUS playstate playing
resptimeout 35000
wait player CHK_PLAYER_STATUS playstate in-fadeout
wait player CHK_PLAYER_STATUS playstate in-gap
wait player CHK_PLAYER_STATUS playstate playing
chk main CHK_MAIN_MUSICQ plen 1
wait player CHK_PLAYER_STATUS playstate stopped
chk main CHK_MAIN_MUSICQ plen 0
end
