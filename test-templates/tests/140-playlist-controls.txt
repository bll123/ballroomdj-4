section 140 Playlist-Controls

test 140-10 Maximum-Play-Time-Basic
msg main QUEUE_PLAYLIST 0~test-sl-c
msg main CMD_PLAY
resptimeout 2000
get player CHK_PLAYER_STATUS
wait playstate playing
mssleep 1000
get player CHK_PLAYER_STATUS
chk currvolume defaultvol actualvolume defaultvol
get player CHK_PLAYER_SONG
chk p-duration 10000
msg player PLAY_FADE
resptimeout 7000
get player CHK_PLAYER_STATUS
wait playstate playing
mssleep 1000
get player CHK_PLAYER_STATUS
chk currvolume defaultvol actualvolume defaultvol
get player CHK_PLAYER_SONG
chk p-duration 10000
msg player PLAY_FADE
resptimeout 7000
get player CHK_PLAYER_STATUS
wait playstate playing
mssleep 1000
get player CHK_PLAYER_STATUS
chk currvolume defaultvol actualvolume defaultvol
get player CHK_PLAYER_SONG
chk p-duration 10000
end

test 140-20 Gap-Basic
msg main QUEUE_PLAYLIST 0~test-sl-d
msg main CMD_PLAY
resptimeout 2000
get player CHK_PLAYER_STATUS
wait playstate playing
mssleep 1000
get player CHK_PLAYER_STATUS
chk currvolume defaultvol actualvolume defaultvol
msg player PLAY_FADE
chk-or playstate in-fadeout stopped loading playing
wait playstate in-fadeout
resptimeout 4500
get player CHK_PLAYER_STATUS
chk-or playstate in-fadeout stopped loading playing
wait playstate playing
chk-or playstate in-fadeout stopped loading playing
mssleep 1000
get player CHK_PLAYER_STATUS
chk currvolume defaultvol actualvolume defaultvol
msg player PLAY_FADE
resptimeout 4500
get player CHK_PLAYER_STATUS
chk-or playstate in-fadeout stopped loading playing
wait playstate playing
chk-or playstate in-fadeout stopped loading playing
mssleep 1000
get player CHK_PLAYER_STATUS
chk currvolume defaultvol actualvolume defaultvol
end

test 140-30 Stop-After-Basic
msg main QUEUE_PLAYLIST 0~test-sl-e
msg main CMD_PLAY
resptimeout 2000
get player CHK_PLAYER_STATUS
wait playstate playing
mssleep 1000
get player CHK_PLAYER_STATUS
chk currvolume defaultvol actualvolume defaultvol
msg player PLAY_FADE
wait playstate in-fadeout
resptimeout 7000
get player CHK_PLAYER_STATUS
wait playstate playing
mssleep 1000
get player CHK_PLAYER_STATUS
chk currvolume defaultvol actualvolume defaultvol
msg player PLAY_FADE
resptimeout 7000
get player CHK_PLAYER_STATUS
chk-or playstate in-fadeout in-gap stopped
wait playstate stopped
chk-or playstate in-fadeout in-gap stopped
end

test 140-40 Stop-At-Basic
msg main PL_OVERRIDE_STOP_TIME stoptime
msg main QUEUE_PLAYLIST 0~test-sl-a
msg main CMD_PLAY
resptimeout 2000
# song 1
get player CHK_PLAYER_STATUS
wait playstate playing
mssleep 1000
resptimeout 35000
get player CHK_PLAYER_STATUS
wait playstate in-fadeout
resptimeout 7000
# song 2
get player CHK_PLAYER_STATUS
wait playstate playing
resptimeout 35000
get player CHK_PLAYER_STATUS
wait playstate in-fadeout
resptimeout 7000
# song 3
get player CHK_PLAYER_STATUS
wait playstate playing
resptimeout 35000
get player CHK_PLAYER_STATUS
wait playstate in-fadeout
resptimeout 7000
# song 4
get player CHK_PLAYER_STATUS
wait playstate playing
resptimeout 35000
get player CHK_PLAYER_STATUS
wait playstate in-fadeout
resptimeout 7000
get player CHK_PLAYER_STATUS
wait playstate stopped
end

test 140-50 Stop-After-Multiple-Playlists
msg main QUEUE_PLAYLIST 0~test-sl-e
msg main CMD_PLAY
msg main QUEUE_PLAYLIST 0~test-sl-e
resptimeout 2000
get player CHK_PLAYER_STATUS
wait playstate playing
mssleep 1000
get player CHK_PLAYER_STATUS
chk currvolume defaultvol actualvolume defaultvol
msg player PLAY_FADE
wait playstate in-fadeout
resptimeout 7000
get player CHK_PLAYER_STATUS
wait playstate playing
mssleep 1000
get player CHK_PLAYER_STATUS
chk currvolume defaultvol actualvolume defaultvol
msg player PLAY_FADE
wait playstate in-fadeout
resptimeout 7000
get player CHK_PLAYER_STATUS
wait playstate playing
mssleep 1000
get player CHK_PLAYER_STATUS
chk currvolume defaultvol actualvolume defaultvol
msg player PLAY_FADE
wait playstate in-fadeout
resptimeout 7000
get player CHK_PLAYER_STATUS
wait playstate playing
mssleep 1000
get player CHK_PLAYER_STATUS
chk currvolume defaultvol actualvolume defaultvol
msg player PLAY_FADE
resptimeout 7000
get player CHK_PLAYER_STATUS
chk-or playstate in-fadeout in-gap stopped
wait playstate stopped
chk-or playstate in-fadeout in-gap stopped
end

test 140-60 Gap-Multiple-Playlists
msg main QUEUE_PLAYLIST 0~test-sl-e
msg main QUEUE_PLAYLIST 0~test-sl-g
msg main QUEUE_PLAYLIST 0~test-sl-e
# ( 1 gap 2 ) ( no-gap 3 no-gap 4 ) ( gap 5 gap 6 )
msg main CMD_PLAY
resptimeout 2000
get player CHK_PLAYER_STATUS
wait playstate playing
mssleep 1000
# first song has a gap
get player CHK_PLAYER_STATUS
chk currvolume defaultvol actualvolume defaultvol
msg player PLAY_FADE
wait playstate in-fadeout
resptimeout 4500
get player CHK_PLAYER_STATUS
wait playstate in-gap
get player CHK_PLAYER_STATUS
wait playstate playing
mssleep 1000
# second song has no gap
get player CHK_PLAYER_STATUS
chk currvolume defaultvol actualvolume defaultvol
msg player PLAY_FADE
chk-or playstate in-fadeout stopped loading playing
wait playstate in-fadeout
resptimeout 4500
get player CHK_PLAYER_STATUS
chk-or playstate in-fadeout stopped loading playing
wait playstate playing
chk-or playstate in-fadeout stopped loading playing
mssleep 1000
# third song no gap
get player CHK_PLAYER_STATUS
chk currvolume defaultvol actualvolume defaultvol
msg player PLAY_FADE
chk-or playstate in-fadeout stopped loading playing
wait playstate in-fadeout
resptimeout 4500
get player CHK_PLAYER_STATUS
chk-or playstate in-fadeout stopped loading playing
wait playstate playing
chk-or playstate in-fadeout stopped loading playing
mssleep 1000
# fourth song has a gap
get player CHK_PLAYER_STATUS
chk currvolume defaultvol actualvolume defaultvol
msg player PLAY_FADE
resptimeout 4500
get player CHK_PLAYER_STATUS
wait playstate in-fadeout
get player CHK_PLAYER_STATUS
wait playstate in-gap
get player CHK_PLAYER_STATUS
wait playstate playing
mssleep 1000
# fifth song has a gap
get player CHK_PLAYER_STATUS
chk currvolume defaultvol actualvolume defaultvol
msg player PLAY_FADE
resptimeout 4500
get player CHK_PLAYER_STATUS
wait playstate in-fadeout
get player CHK_PLAYER_STATUS
wait playstate in-gap
get player CHK_PLAYER_STATUS
wait playstate playing
mssleep 1000
# sixth song
get player CHK_PLAYER_STATUS
chk currvolume defaultvol actualvolume defaultvol
wait playstate playing
mssleep 1000
end

