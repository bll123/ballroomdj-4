section 90 Player-Config

test 90-10 Gap
msg main CHK_MAIN_GAP 1000
msg main MUSICQ_INSERT 0~999~0
msg main MUSICQ_INSERT 0~999~1
msg main MUSICQ_INSERT 0~999~2
msg main CMD_PLAY
resptimeout 2000
get player CHK_PLAYER_STATUS
wait playstate playing
mssleep 1000
resptimeout 5500
msg player PLAY_FADE
get player CHK_PLAYER_STATUS
wait playstate in-fadeout
wait playstate in-gap
get player CHK_PLAYER_STATUS
chk realvolume 0
get player CHK_PLAYER_STATUS
wait playstate playing
mssleep 1000
msg main CHK_MAIN_GAP 2000
end

test 90-11 No-Gap
msg main CHK_MAIN_GAP 0
msg main MUSICQ_INSERT 0~999~0
msg main MUSICQ_INSERT 0~999~1
msg main MUSICQ_INSERT 0~999~2
msg main CMD_PLAY
resptimeout 2000
get player CHK_PLAYER_STATUS
wait playstate playing
mssleep 1000
resptimeout 5000
msg player PLAY_FADE
get player CHK_PLAYER_STATUS
chk-or playstate in-fadeout playing
wait playstate in-fadeout
chk-or playstate in-fadeout playing
# --verbose helps here to validate that the in-gap state is not set.
wait playstate playing
mssleep 1000
msg main CHK_MAIN_GAP 2000
end

test 90-20 No-Fade-In
msg player PLAYER_VOLUME 30
msg player CHK_PLAYER_FADEIN 0
msg main MUSICQ_INSERT 0~999~0
msg main MUSICQ_INSERT 0~999~1
msg main MUSICQ_INSERT 0~999~2
msg main CHK_MAIN_GAP 2000
msg main CMD_PLAY
resptimeout 2000
get player CHK_PLAYER_STATUS
wait playstate playing
chk currvolume 30 realvolume 30
mssleep 1000
resptimeout 6500
msg player PLAY_FADE
get player CHK_PLAYER_STATUS
wait playstate playing
chk currvolume 30 realvolume 30
mssleep 1000
msg player CHK_PLAYER_FADEIN 400
end

test 90-30 No-Fade-Out
msg player CHK_PLAYER_FADEOUT 0
msg main MUSICQ_INSERT 0~999~0
msg main MUSICQ_INSERT 0~999~1
msg main MUSICQ_INSERT 0~999~2
msg main CHK_MAIN_GAP 2000
msg main CMD_PLAY
resptimeout 2000
get player CHK_PLAYER_STATUS
wait playstate playing
mssleep 1000
resptimeout 3000
msg player PLAY_FADE
get player CHK_PLAYER_STATUS
chk-or playstate in-gap playing
# --verbose can be used to show that in-fadeout is not used
wait playstate in-gap
chk-or playstate in-gap playing
wait playstate playing
mssleep 1000
msg player CHK_PLAYER_FADEOUT 4000
end

test 90-31 No-Gap-No-Fade-Out
msg main CHK_MAIN_GAP 0
msg player CHK_PLAYER_FADEOUT 0
msg main MUSICQ_INSERT 0~999~0
msg main MUSICQ_INSERT 0~999~1
msg main MUSICQ_INSERT 0~999~2
msg main CMD_PLAY
resptimeout 2000
get player CHK_PLAYER_STATUS
wait playstate playing
mssleep 1000
resptimeout 1000
msg player PLAY_FADE
get player CHK_PLAYER_STATUS
# --verbose helps here to validate that neither in-fadeout nor in-gap is set.
wait playstate playing
mssleep 1000
msg main CHK_MAIN_GAP 2000
msg player CHK_PLAYER_FADEOUT 4000
end

test 90-40 Maximum-Play-Time
msg main CHK_MAIN_MAXPLAYTIME 10000
msg main MUSICQ_INSERT 0~999~0
msg main CMD_PLAY
resptimeout 2000
get player CHK_PLAYER_STATUS
wait playstate playing
mssleep 1000
get player CHK_PLAYER_SONG
chk p-duration 10000
resptimeout 14500
get player CHK_PLAYER_STATUS
wait playstate in-fadeout
wait playstate in-gap
wait playstate stopped
msg main CHK_MAIN_MAXPLAYTIME 360000
end

